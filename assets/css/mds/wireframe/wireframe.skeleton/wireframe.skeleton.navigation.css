/* Navigation - structural layout only */
@layer components {
  /* ============================================
     DROPDOWN NAVIGATION SKELETON  
     ============================================ */
  .nav--dropdown {
    
    .nav-list { 
      @apply relative flex;
      @apply select-none;
    }
    
    /* Base nav item structure */
    .nav-item {
      @apply relative;
    }
    
    .nav-item-link {
      @apply flex items-center;
      cursor: pointer;
      
      /* Passive navigation items (spans) should have pointer cursor when they have submenus */
      &.nav-item-passive {
        cursor: pointer;
      }
    }
    
    .subnav-indicator {
      @apply w-4 h-4;
      @apply ml-2;
    }

    /* Multi-level navigation system with proper positioning */
    
    /* Level 1 - Top level horizontal nav */
    .nav-menu-level-1 {
      /* Level 1 inherits existing .nav-list styles */
    }
    
    .nav-item-level-1 {
      /* Always show on active state */
      &.active > .nav-menu-level-2 {
        @apply visible opacity-100;
      }
    }
    
    /* Level 2 - First dropdown */
    .nav-menu-level-2 {
      @apply absolute top-full left-0;
      @apply flex flex-col;
      @apply min-w-[16rem];
      @apply opacity-0 invisible;
    }
    
    .nav-item-level-2 {
      /* Always show on active state */
      &.active > .nav-menu-level-3 {
        @apply visible opacity-100;
      }
    }
    
    .nav-link-level-2 {
      @apply flex;
      
      .subnav-indicator {
        @apply w-3 h-3;
        @apply ml-auto;
      }
    }

    /* Level 3+ - Right-flying submenus */
    .nav-menu-level-3,
    .nav-menu-level-4,
    .nav-menu-level-5,
    .nav-menu-level-6 {
      @apply absolute top-0 left-full;
      @apply flex flex-col;
      @apply min-w-[16rem];
      @apply opacity-0 invisible;
    }
    
    .nav-item-level-3 {
      @apply relative;
      
      &.active > .nav-menu-level-4 {
        @apply visible opacity-100;
      }
    }
    
    .nav-item-level-4 {
      @apply relative;
      
      &.active > .nav-menu-level-5 {
        @apply visible opacity-100;
      }
    }
    
    .nav-item-level-5 {
      @apply relative;
      
      &.active > .nav-menu-level-6 {
        @apply visible opacity-100;
      }
    }
    
    .nav-item-level-6 {
      @apply relative;
    }

    .nav-link-level-3,
    .nav-link-level-4,
    .nav-link-level-5,
    .nav-link-level-6 {
      @apply flex;
      
      .subnav-indicator {
        @apply w-3 h-3;
        @apply ml-auto;
      }
    }

    /* Legacy support - maintain old classes for compatibility */
    .nav-submenu {
      @apply absolute;
      @apply min-w-[16rem];
      @apply opacity-0 invisible;
    }
    
    .nav-subitem {
      @apply block;
    }
  }

  /* ============================================
     MEGAMENU NAVIGATION SKELETON  
     ============================================ */
  .nav--megamenu {
    
    .nav-list { 
      @apply flex;
      @apply gap-2 lg:gap-4;
      @apply select-none;
    }
    
    .nav-item-link {
      @apply flex items-center;
      cursor: pointer;
      
      /* Passive navigation items (spans) should have pointer cursor when they have submenus */
      &.nav-item-passive {
        cursor: pointer;
      }
    }
    
    .subnav-indicator {
      @apply w-4 h-4;
      @apply ml-2;
    }

    .nav-menu-level-2,
    .nav-menu-level-3 {
      @apply flex flex-col;
    }
    
    /* Level 1 remains horizontal in header */
    .nav-menu-level-1 {
      /* Inherits existing horizontal layout */
    }
    
    /* Level 1 items trigger megamenu panel */
    .nav-item-level-1 {
      &.active > .nav-menu-level-2 {
        @apply visible opacity-100;
      }
    }
    
    /* Level 2 becomes full-width mega panel */
    .nav-menu-level-2 {
      @apply absolute top-full left-6 right-6;
      @apply flex flex-col;
      /* min-height: 24rem; */
      @apply opacity-0 invisible;
      z-index: 50;
    }
    
    /* Megamenu columns container */
    .megamenu-columns {
      @apply flex;
      @apply w-full mx-auto;
      @apply grid grid-cols-3;
    }
    
    /* Individual columns */
    .megamenu-column {
      @apply border-r last:border-r-0;
      @apply min-h-full;
      
      &.column-1 {
        flex: 0 0 280px;
      }
      
      &.column-2,
      &.column-3 {
        flex: 0 0 300px;
        
        /* Hidden by default, shown when parent item is active */
        @apply hidden;
        
        &.active {
          @apply flex flex-col;
        }
      }
    }

    .nav-link {
      @apply flex justify-between items-center gap-3;
    }
    
    /* Level 2 - First column (always visible) */
    .nav-item-level-2 {
      @apply flex w-full;
    }
    
    .nav-link-level-2 {
      @apply w-full;
      @apply text-left;
      @apply border-l-4;
      @apply border-transparent;
    }
    
    /* Level 3 - Second column */
    .nav-menu-level-3 {
      @apply flex w-full h-full;
    }
    
    .nav-item-level-3 {
      @apply flex w-full;
    }
    
    .nav-link-level-3 {
      @apply w-full;
      @apply text-left;
      @apply border-l-4;
      @apply border-transparent;
    }
    
    /* Level 4 - Third column */
    .nav-menu-level-4 {
      @apply flex-2/3 w-full h-full;
    }
    
    .nav-item-level-4 {
      @apply block w-full;
    }
    
    .nav-link-level-4 {
      @apply w-full;
      @apply text-left;
    }

    /* "View [page title]" links for click interaction mode in megamenu */
    .nav-item-view-page {
      @apply border-b;
      
      /* Hidden by default, shown only in click interaction mode */
      @apply hidden;
      
      .nav-link-view-page {
        /* No chevron arrow for view page links */
        .subnav-indicator {
          @apply hidden;
        }
      }
    }
    
    /* Show "View [page title]" links only in click interaction mode */
    &[data-interaction="click"] {
      .nav-item-view-page {
        @apply block;
      }
    }
    
    /* Column headers */
    .megamenu-column-header {
      @apply px-4 py-3;
      @apply uppercase;
      @apply tracking-wide;
      border-bottom: 1px solid var(--mds-border-primary);
    }
    
    /* Hide deeper levels in megamenu mode */
    .nav-menu-level-5,
    .nav-menu-level-6 {
      @apply hidden;
    }
    
    /* Responsive megamenu */
    @media (max-width: 768px) {
      .nav-menu-level-2 {
        @apply w-full;
        
        .megamenu-columns {
          @apply flex-col;
        }
        
        .megamenu-column {
          @apply flex-none;
          @apply border-r-0;
          @apply border-b;
          @apply last:border-b-0;
          
          &.column-2,
          &.column-3 {
            @apply block; /* Always show on mobile */
          }
        }
      }
    }
    
    @media (max-width: 768px) {
      .nav-menu-level-2 {
        @apply static max-w-none shadow-none;
        min-height: auto;
        
        .megamenu-column {
          &.column-1 {
            flex: none;
          }
        }
      }
    }
  }
  

  /* Mobile nav structure */
  .mobile-header-inner {
    @apply flex justify-between items-center;
    @apply w-full;
  }
  .btn-menu {
    @apply relative z-[150];
    @apply flex flex-col justify-center items-center;
  }

  /* Mobile Navigation Container */
  .mobile-nav-container {
    @apply relative;
  }
  
  /* Mobile Navigation Panel */
  .mobile-nav {
    @apply fixed left-0 z-40;
    top: var(--header-height);
    @apply w-full;
    height: calc(100vh - var(--header-height));
    max-width: calc(100vw - 3rem);
    @apply overflow-y-auto;
  }
  
  .mobile-nav-content {
    @apply flex flex-col;
    @apply h-full;
  }
  
  .mobile-nav-main {
    @apply flex-1 overflow-y-auto;
  }
  
  .mobile-nav-item-header {
    @apply flex items-center justify-between;
    @apply w-full;
    border-bottom: 1px solid var(--mds-mobile-nav-border);
  }
  
  /* Mobile Navigation Links */
  .mobile-nav-link {
    @apply flex-1;
  }
  
  /* Mobile Navigation Toggle Button */
  .mobile-nav-toggle {
    @apply flex items-center justify-center;
    @apply w-8 h-8;
    @apply ml-4;
  }
  
  /* Mobile Navigation Actions */
  .mobile-nav-actions {
    border-top: 1px solid var(--mds-mobile-nav-border);
  }
  
  .mobile-nav-cta {
    @apply flex items-center justify-center gap-3;
    @apply w-full;
  }
  
  /* Menu Icons */
  .menu-icon {
    @apply w-8 h-8;
  }
  
  .menu-close-icon {
    @apply w-8 h-8;
  }

  /* Mobile Sliding Navigation Structure */
  
  /* Mobile Navigation Container - Sliding */
  .mobile-nav-container--sliding {
    @apply relative;
  }
  
  /* Mobile Navigation Panel - Sliding */
  .mobile-nav--sliding {
    @apply fixed left-0 z-40;
    top: var(--header-height);
    @apply w-full;
    max-width: calc(100vw - 3rem);
    height: calc(100vh - var(--header-height));
    @apply overflow-hidden;
  }
  
  .mobile-nav-content--sliding {
    @apply relative;
    @apply flex flex-col;
    @apply h-full;
  }
  
  .mobile-nav-main--sliding {
    @apply relative;
    @apply flex-1;
    @apply overflow-hidden;
  }
  
  /* Sliding Levels Container */
  .mobile-nav-levels {
    @apply relative;
    @apply w-full h-full;
  }
  
  .mobile-nav-level {
    @apply absolute top-0 left-0;
    @apply w-full h-full;
    @apply transform -translate-x-full;
    @apply overflow-y-auto;
  }
  
  .mobile-nav-level.active {
    @apply translate-x-0;
  }
  
  .mobile-nav-item-header--sliding {
    @apply flex items-center justify-between;
    @apply w-full;
    border-bottom: 1px solid var(--mds-mobile-nav-border);
  }
  
  /* Level Header with Back Button */
  .mobile-nav-level-header {
    @apply flex items-center;
    border-bottom: 1px solid var(--mds-mobile-nav-border);
  }
  
  .mobile-nav-back-btn {
    @apply flex items-center justify-center;
    @apply w-10 h-10;
    @apply mr-4;
  }
  
  .mobile-nav-level-title {
    @apply flex-1;
  }
  
  /* Mobile Navigation Links - Sliding */
  .mobile-nav-link--sliding {
    @apply flex-1;
  }
  
  /* Mobile Navigation Toggle Button - Sliding */
  .mobile-nav-toggle--sliding {
    @apply flex items-center justify-center;
    @apply w-8 h-8;
    @apply ml-4;
  }
  
  /* Mobile Navigation Actions - Sliding */
  .mobile-nav-actions--sliding {
    border-top: 1px solid var(--mds-mobile-nav-border);
  }
  
  .mobile-nav-cta--sliding {
    @apply flex items-center justify-center gap-3;
    @apply w-full;
  }
  
  /* Menu Icons - Sliding */
  .menu-icon--sliding {
    @apply w-8 h-8;
  }
  
  .menu-close-icon--sliding {
    @apply w-8 h-8;
  }
  
  /* Back Icon */
  .back-icon {
    @apply w-5 h-5;
  }

  /* Mobile Navigation Global Effects */
  
  /* Body scroll lock when mobile nav is open */
  .mobile-nav-open {
    @apply overflow-hidden;
  }
  
  /* Blur effect for main content when mobile nav is open */
  .mobile-nav-blur {
    @apply transition-all duration-300;
  }

  /* Footer Navigation */
  .nav-footer {
    
  }
  .nav-footer-link {
    @apply py-2 font-medium;
    @apply hover:no-underline;
  }
}