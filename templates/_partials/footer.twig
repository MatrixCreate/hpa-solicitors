{% import "_macros/ui.twig" as ui %}

{% cache if not craft.app.config.general.devMode %}

{% set customiseFooterColours = siteConfig.customiseFooterColours %}

{% set footerBackgroundColour = customiseFooterColours ? siteConfig.footerBackgroundColour.color[0].background : '' %}
{% set footerHeadingColour = customiseFooterColours ? siteConfig.footerHeadingColour.color[0].heading : '' %}
{% set footerTextColour = customiseFooterColours ? siteConfig.footerTextColour.color[0].text : '' %}
  {# {% set footerHeadingColour = siteConfig.footerHeadingColour.color[0].heading %}
  {% set footerTextColour = siteConfig.footerTextColour.color[0].text %} #}

<footer class="footer">
  {% include "_partials/footer-blocks" %}
  <div class="footer-inner
  {{ footerBackgroundColour}}
  {{ footerHeadingColour}}
  {{ footerTextColour}}">
    <div class="footer-container pt-8 pb-0">
      <div class="footer-primary">
        {# Load logo assets from global-variables file #}
        {%- if companyInfo.footerLogo.one() -%}
          {%- set footerLogo = companyInfo.footerLogo.one() -%}
          <img loading="lazy" decoding="async" class="footer-logo" src="{{ footerLogo.url }}" alt="{{ siteName }}" width="{{ footerLogo.width }}" height="{{ footerLogo.height }}">
        {%- elseif companyInfo.mainLogo.one() -%}
          {%- set mainLogo = companyInfo.mainLogo.one() -%}
          <img loading="lazy" decoding="async" class="footer-logo" src="{{ mainLogo.url }}" alt="{{ siteName }}" width="{{ mainLogo.width }}" height="{{ mainLogo.height }}">
        {%- else -%}
          <h5 class="text-2xl">{{ siteName }}</h5>
        {%- endif -%}
      </div>
    </div>

    <div class="footer-container py-6">
      <div class="footer-primary">
        <div class="footer-content">          
          {%- if siteConfig.footerTagline|length -%}
          <div class="footer-tagline pl-4 border-l border-white">
            {{ siteConfig.footerTagline }}
          </div>
          {%- endif -%}
        </div>
      </div>

      <div class="footer-primary">
      {%- if siteConfig.showContactDetailsInFooter and companyInfo.address.companyName|length -%}
        <h2 class="mb-4 font-display font-bold text-2xl text-gold">Contact</h2>
        <div class="footer-contact">
          <p class="mb-6">
            {{ companyInfo.address.companyName|length ? ("#{companyInfo.address.companyName}<br> ")|raw : '' }}
            {{ companyInfo.address.addressLine1|length ? ("#{companyInfo.address.addressLine1}<br>")|raw : '' }}
            {{ companyInfo.address.addressLine2|length ? ("#{companyInfo.address.addressLine2}<br>")|raw : '' }}
            {{ companyInfo.address.addressLine3|length ? ("#{companyInfo.address.addressLine3}<br>")|raw : '' }}
            {{ companyInfo.address.townCity|length ? ("#{companyInfo.address.townCity}<br> ")|raw : '' }}
            {{ companyInfo.address.county|length ? ("#{companyInfo.address.county}<br> ")|raw : '' }}
            {{ companyInfo.address.postcode|length ? ("#{companyInfo.address.postcode}")|raw : '' }}
          </p>
          {%- if companyInfo.telephone|length -%}
          <span class="flex gap-1">
            <span>Tel:</span> 
            <a href="tel:{{ companyInfo.telephone|replace({' ': ''}) }}">
              {{ companyInfo.telephone }}
            </a>
          </span>
          {%- endif -%}
          {%- if companyInfo.fax|length -%}
          <span class="flex gap-1">
            <span>Fax:</span> 
            <span>
              {{ companyInfo.fax }}
            </span>
          </span>
          {%- endif -%}
          {%- if companyInfo.email|length -%}
          <span class="flex gap-1">
            <span>Email:</span> 
            <a href="mailto:{{ companyInfo.email }}">
              {{ companyInfo.email }}
            </a>
          </span>
          {%- endif -%}
        </div>
      {%- endif -%}

        {%- if companyInfo.openingHours|length -%}
          {% include '_partials/opening-hours' %}
        {%- endif -%}
      </div>

      <div class="footer-nav xs:flex-row items-start">
        {% include '_partials/navigation/navigation-footer' %}
      </div>
    </div>

    <div class="footer-container py-6">
      <div class="footer-primary">
        {%- if siteConfig.showSocialNetworksInFooter -%}
        <div class="footer-socials text-gold">
          {{ ui.component('social-networks', { size: 'md', gap: 'gap-2' }) }}
        </div>
        {% endif %}
      </div>
    </div>

    <div class="footer-container py-0">
      <div class="footer-bottom-content">
        <div class="footer-legal">
          {% include "_partials/navigation/navigation-legal" %}
        </div>

        <div class="footer-copyright">
          <div>
            &copy; {{ now|date('Y') }} {{ companyInfo.address.companyName is defined ? companyInfo.address.companyName : siteName }}.
          </div>

          {%- if adminSettings.showWebsiteCredit -%}
          <div class="footer-credit">
            Website Design & Development by
            <a class="footer-credit-link" href="https://localiq.co.uk/" target="_blank" rel="nofollow noreferrer" title="Visit LOCALiQ">
              <img loading="lazy" decoding="async" class="footer-credit-logo -mt-1" src="/assets/site/localiq_white.svg" width="55" height="12" alt="LOCALiQ">
            </a>
          </div>
          {%- endif -%}
        </div>
      </div>
    </div>
    <div class="footer-container py-8">
      {% if siteConfig.legalDisclaimer|length %}
      <div class="footer-disclaimer text-xs">
        {{ siteConfig.legalDisclaimer }}
      </div>
      {% endif %}
    </div>
  </div>

  {{ ui.component('back-to-top') }}
</footer>

{% endcache %}
